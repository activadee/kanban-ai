// AUTO-GENERATED by scripts/build-drizzle-migration-bundle.ts; DO NOT EDIT BY HAND.
export type DrizzleMigrationSpec = { id: string; name: string; checksum: string; sql: string };
export const drizzleMigrations: DrizzleMigrationSpec[] = [
  { id: "20251203142618_init", name: "20251203142618_init", checksum: "3cf88cc6ed0584c701cc1c4e19cbcc476d367df2291173cb963a62bca96af947", sql: "-- CreateTable\nCREATE TABLE \"boards\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"name\" TEXT NOT NULL,\n    \"repository_path\" TEXT NOT NULL,\n    \"repository_url\" TEXT,\n    \"repository_slug\" TEXT,\n    \"created_at\" INTEGER NOT NULL DEFAULT 0,\n    \"updated_at\" INTEGER NOT NULL DEFAULT 0\n);\n\n-- CreateTable\nCREATE TABLE \"project_settings\" (\n    \"project_id\" TEXT NOT NULL PRIMARY KEY,\n    \"base_branch\" TEXT NOT NULL DEFAULT 'main',\n    \"preferred_remote\" TEXT,\n    \"setup_script\" TEXT,\n    \"dev_script\" TEXT,\n    \"cleanup_script\" TEXT,\n    \"copy_files\" TEXT,\n    \"default_agent\" TEXT,\n    \"default_profile_id\" TEXT,\n    \"inline_agent\" TEXT,\n    \"inline_profile_id\" TEXT,\n    \"auto_commit_on_finish\" INTEGER NOT NULL DEFAULT 0,\n    \"auto_push_on_autocommit\" INTEGER NOT NULL DEFAULT 0,\n    \"ticket_prefix\" TEXT NOT NULL DEFAULT 'PRJ',\n    \"next_ticket_number\" INTEGER NOT NULL DEFAULT 1,\n    \"github_issue_sync_enabled\" INTEGER NOT NULL DEFAULT 0,\n    \"github_issue_sync_state\" TEXT NOT NULL DEFAULT 'open',\n    \"github_issue_sync_interval_minutes\" INTEGER NOT NULL DEFAULT 15,\n    \"last_github_issue_sync_at\" INTEGER,\n    \"last_github_issue_sync_status\" TEXT NOT NULL DEFAULT 'idle',\n    \"created_at\" INTEGER NOT NULL DEFAULT 0,\n    \"updated_at\" INTEGER NOT NULL DEFAULT 0\n);\n\n-- CreateTable\nCREATE TABLE \"columns\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"title\" TEXT NOT NULL,\n    \"position\" INTEGER NOT NULL,\n    \"board_id\" TEXT NOT NULL,\n    \"created_at\" INTEGER NOT NULL DEFAULT 0,\n    \"updated_at\" INTEGER NOT NULL DEFAULT 0\n);\n\n-- CreateTable\nCREATE TABLE \"cards\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"title\" TEXT NOT NULL,\n    \"description\" TEXT,\n    \"position\" INTEGER NOT NULL,\n    \"column_id\" TEXT NOT NULL,\n    \"board_id\" TEXT,\n    \"ticket_key\" TEXT,\n    \"ticket_type\" TEXT,\n    \"pr_url\" TEXT,\n    \"created_at\" INTEGER NOT NULL DEFAULT 0,\n    \"updated_at\" INTEGER NOT NULL DEFAULT 0\n);\n\n-- CreateTable\nCREATE TABLE \"card_dependencies\" (\n    \"card_id\" TEXT NOT NULL,\n    \"depends_on_card_id\" TEXT NOT NULL,\n    \"created_at\" INTEGER NOT NULL DEFAULT 0,\n\n    PRIMARY KEY (\"card_id\", \"depends_on_card_id\")\n);\n\n-- CreateTable\nCREATE TABLE \"card_enhancements\" (\n    \"card_id\" TEXT NOT NULL PRIMARY KEY,\n    \"status\" TEXT NOT NULL,\n    \"suggestion_title\" TEXT,\n    \"suggestion_description\" TEXT,\n    \"updated_at\" INTEGER NOT NULL DEFAULT 0\n);\n\n-- CreateTable\nCREATE TABLE \"app_settings\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY DEFAULT 'singleton',\n    \"theme\" TEXT NOT NULL DEFAULT 'system',\n    \"language\" TEXT NOT NULL DEFAULT 'browser',\n    \"telemetry_enabled\" INTEGER NOT NULL DEFAULT 0,\n    \"notif_toast_sounds\" INTEGER NOT NULL DEFAULT 0,\n    \"notif_desktop\" INTEGER NOT NULL DEFAULT 0,\n    \"auto_start_agent_on_in_progress\" INTEGER NOT NULL DEFAULT 0,\n    \"editor_type\" TEXT NOT NULL DEFAULT 'VS_CODE',\n    \"editor_command\" TEXT,\n    \"git_user_name\" TEXT,\n    \"git_user_email\" TEXT,\n    \"branch_template\" TEXT NOT NULL DEFAULT '{prefix}/{ticketKey}-{slug}',\n    \"gh_pr_title_template\" TEXT,\n    \"gh_pr_body_template\" TEXT,\n    \"gh_autolink_tickets\" INTEGER NOT NULL DEFAULT 1,\n    \"created_at\" INTEGER NOT NULL DEFAULT 0,\n    \"updated_at\" INTEGER NOT NULL DEFAULT 0\n);\n\n-- CreateTable\nCREATE TABLE \"agent_profiles\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"project_id\" TEXT NOT NULL,\n    \"agent\" TEXT NOT NULL,\n    \"name\" TEXT NOT NULL,\n    \"config_json\" TEXT NOT NULL,\n    \"created_at\" INTEGER NOT NULL DEFAULT 0,\n    \"updated_at\" INTEGER NOT NULL DEFAULT 0\n);\n\n-- CreateTable\nCREATE TABLE \"agent_profiles_global\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"agent\" TEXT NOT NULL,\n    \"name\" TEXT NOT NULL,\n    \"config_json\" TEXT NOT NULL,\n    \"created_at\" INTEGER NOT NULL DEFAULT 0,\n    \"updated_at\" INTEGER NOT NULL DEFAULT 0\n);\n\n-- CreateTable\nCREATE TABLE \"attempts\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"board_id\" TEXT NOT NULL,\n    \"card_id\" TEXT NOT NULL,\n    \"agent\" TEXT NOT NULL,\n    \"status\" TEXT NOT NULL,\n    \"base_branch\" TEXT NOT NULL,\n    \"branch_name\" TEXT NOT NULL,\n    \"worktree_path\" TEXT,\n    \"session_id\" TEXT,\n    \"created_at\" INTEGER NOT NULL DEFAULT 0,\n    \"updated_at\" INTEGER NOT NULL DEFAULT 0,\n    \"started_at\" INTEGER,\n    \"ended_at\" INTEGER\n);\n\n-- CreateTable\nCREATE TABLE \"attempt_logs\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"attempt_id\" TEXT NOT NULL,\n    \"ts\" INTEGER NOT NULL DEFAULT 0,\n    \"level\" TEXT NOT NULL,\n    \"message\" TEXT NOT NULL\n);\n\n-- CreateTable\nCREATE TABLE \"conversation_items\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"attempt_id\" TEXT NOT NULL,\n    \"seq\" INTEGER NOT NULL,\n    \"ts\" INTEGER NOT NULL DEFAULT 0,\n    \"item_json\" TEXT NOT NULL\n);\n\n-- CreateTable\nCREATE TABLE \"attempt_todos\" (\n    \"attempt_id\" TEXT NOT NULL PRIMARY KEY,\n    \"todos_json\" TEXT NOT NULL,\n    \"updated_at\" INTEGER NOT NULL DEFAULT 0\n);\n\n-- CreateTable\nCREATE TABLE \"github_connections\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"username\" TEXT,\n    \"primary_email\" TEXT,\n    \"access_token\" TEXT,\n    \"token_type\" TEXT,\n    \"scope\" TEXT,\n    \"created_at\" INTEGER NOT NULL DEFAULT 0,\n    \"updated_at\" INTEGER NOT NULL DEFAULT 0\n);\n\n-- CreateTable\nCREATE TABLE \"github_issues\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"board_id\" TEXT NOT NULL,\n    \"card_id\" TEXT NOT NULL,\n    \"owner\" TEXT NOT NULL,\n    \"repo\" TEXT NOT NULL,\n    \"issue_id\" TEXT NOT NULL,\n    \"issue_number\" INTEGER NOT NULL,\n    \"title_snapshot\" TEXT NOT NULL,\n    \"url\" TEXT NOT NULL,\n    \"state\" TEXT NOT NULL,\n    \"created_at\" INTEGER NOT NULL DEFAULT 0,\n    \"updated_at\" INTEGER NOT NULL DEFAULT 0\n);\n\n-- CreateTable\nCREATE TABLE \"onboarding_state\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY DEFAULT 'singleton',\n    \"status\" TEXT NOT NULL DEFAULT 'pending',\n    \"last_step\" TEXT,\n    \"completed_at\" INTEGER,\n    \"created_at\" INTEGER NOT NULL DEFAULT 0,\n    \"updated_at\" INTEGER NOT NULL DEFAULT 0\n);\n\n-- CreateTable\nCREATE TABLE \"github_app_configs\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY DEFAULT 'singleton',\n    \"client_id\" TEXT NOT NULL,\n    \"client_secret\" TEXT,\n    \"created_at\" INTEGER NOT NULL DEFAULT 0,\n    \"updated_at\" INTEGER NOT NULL DEFAULT 0\n);\n\n-- CreateIndex\nCREATE UNIQUE INDEX \"cards_board_ticket_key_idx\" ON \"cards\"(\"board_id\", \"ticket_key\");\n\n-- CreateIndex\nCREATE UNIQUE INDEX \"card_deps_unique\" ON \"card_dependencies\"(\"card_id\", \"depends_on_card_id\");\n" },
  { id: "20251203144245_add_fks", name: "20251203144245_add_fks", checksum: "ce8f11c97a808a86fd72d30ed1f9fa7881e20544017d191f0d697e7521e15502", sql: "-- RedefineTables\nPRAGMA defer_foreign_keys=ON;\nPRAGMA foreign_keys=OFF;\nCREATE TABLE \"new_agent_profiles\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"project_id\" TEXT NOT NULL,\n    \"agent\" TEXT NOT NULL,\n    \"name\" TEXT NOT NULL,\n    \"config_json\" TEXT NOT NULL,\n    \"created_at\" INTEGER NOT NULL DEFAULT 0,\n    \"updated_at\" INTEGER NOT NULL DEFAULT 0,\n    CONSTRAINT \"agent_profiles_project_id_fkey\" FOREIGN KEY (\"project_id\") REFERENCES \"boards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\nINSERT INTO \"new_agent_profiles\" (\"agent\", \"config_json\", \"created_at\", \"id\", \"name\", \"project_id\", \"updated_at\") SELECT \"agent\", \"config_json\", \"created_at\", \"id\", \"name\", \"project_id\", \"updated_at\" FROM \"agent_profiles\";\nDROP TABLE \"agent_profiles\";\nALTER TABLE \"new_agent_profiles\" RENAME TO \"agent_profiles\";\nCREATE TABLE \"new_attempt_logs\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"attempt_id\" TEXT NOT NULL,\n    \"ts\" INTEGER NOT NULL DEFAULT 0,\n    \"level\" TEXT NOT NULL,\n    \"message\" TEXT NOT NULL,\n    CONSTRAINT \"attempt_logs_attempt_id_fkey\" FOREIGN KEY (\"attempt_id\") REFERENCES \"attempts\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\nINSERT INTO \"new_attempt_logs\" (\"attempt_id\", \"id\", \"level\", \"message\", \"ts\") SELECT \"attempt_id\", \"id\", \"level\", \"message\", \"ts\" FROM \"attempt_logs\";\nDROP TABLE \"attempt_logs\";\nALTER TABLE \"new_attempt_logs\" RENAME TO \"attempt_logs\";\nCREATE TABLE \"new_attempt_todos\" (\n    \"attempt_id\" TEXT NOT NULL PRIMARY KEY,\n    \"todos_json\" TEXT NOT NULL,\n    \"updated_at\" INTEGER NOT NULL DEFAULT 0,\n    CONSTRAINT \"attempt_todos_attempt_id_fkey\" FOREIGN KEY (\"attempt_id\") REFERENCES \"attempts\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\nINSERT INTO \"new_attempt_todos\" (\"attempt_id\", \"todos_json\", \"updated_at\") SELECT \"attempt_id\", \"todos_json\", \"updated_at\" FROM \"attempt_todos\";\nDROP TABLE \"attempt_todos\";\nALTER TABLE \"new_attempt_todos\" RENAME TO \"attempt_todos\";\nCREATE TABLE \"new_attempts\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"board_id\" TEXT NOT NULL,\n    \"card_id\" TEXT NOT NULL,\n    \"agent\" TEXT NOT NULL,\n    \"status\" TEXT NOT NULL,\n    \"base_branch\" TEXT NOT NULL,\n    \"branch_name\" TEXT NOT NULL,\n    \"worktree_path\" TEXT,\n    \"session_id\" TEXT,\n    \"created_at\" INTEGER NOT NULL DEFAULT 0,\n    \"updated_at\" INTEGER NOT NULL DEFAULT 0,\n    \"started_at\" INTEGER,\n    \"ended_at\" INTEGER,\n    CONSTRAINT \"attempts_board_id_fkey\" FOREIGN KEY (\"board_id\") REFERENCES \"boards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE,\n    CONSTRAINT \"attempts_card_id_fkey\" FOREIGN KEY (\"card_id\") REFERENCES \"cards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\nINSERT INTO \"new_attempts\" (\"agent\", \"base_branch\", \"board_id\", \"branch_name\", \"card_id\", \"created_at\", \"ended_at\", \"id\", \"session_id\", \"started_at\", \"status\", \"updated_at\", \"worktree_path\") SELECT \"agent\", \"base_branch\", \"board_id\", \"branch_name\", \"card_id\", \"created_at\", \"ended_at\", \"id\", \"session_id\", \"started_at\", \"status\", \"updated_at\", \"worktree_path\" FROM \"attempts\";\nDROP TABLE \"attempts\";\nALTER TABLE \"new_attempts\" RENAME TO \"attempts\";\nCREATE TABLE \"new_card_dependencies\" (\n    \"card_id\" TEXT NOT NULL,\n    \"depends_on_card_id\" TEXT NOT NULL,\n    \"created_at\" INTEGER NOT NULL DEFAULT 0,\n\n    PRIMARY KEY (\"card_id\", \"depends_on_card_id\"),\n    CONSTRAINT \"card_dependencies_card_id_fkey\" FOREIGN KEY (\"card_id\") REFERENCES \"cards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE,\n    CONSTRAINT \"card_dependencies_depends_on_card_id_fkey\" FOREIGN KEY (\"depends_on_card_id\") REFERENCES \"cards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\nINSERT INTO \"new_card_dependencies\" (\"card_id\", \"created_at\", \"depends_on_card_id\") SELECT \"card_id\", \"created_at\", \"depends_on_card_id\" FROM \"card_dependencies\";\nDROP TABLE \"card_dependencies\";\nALTER TABLE \"new_card_dependencies\" RENAME TO \"card_dependencies\";\nCREATE UNIQUE INDEX \"card_deps_unique\" ON \"card_dependencies\"(\"card_id\", \"depends_on_card_id\");\nCREATE TABLE \"new_card_enhancements\" (\n    \"card_id\" TEXT NOT NULL PRIMARY KEY,\n    \"status\" TEXT NOT NULL,\n    \"suggestion_title\" TEXT,\n    \"suggestion_description\" TEXT,\n    \"updated_at\" INTEGER NOT NULL DEFAULT 0,\n    CONSTRAINT \"card_enhancements_card_id_fkey\" FOREIGN KEY (\"card_id\") REFERENCES \"cards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\nINSERT INTO \"new_card_enhancements\" (\"card_id\", \"status\", \"suggestion_description\", \"suggestion_title\", \"updated_at\") SELECT \"card_id\", \"status\", \"suggestion_description\", \"suggestion_title\", \"updated_at\" FROM \"card_enhancements\";\nDROP TABLE \"card_enhancements\";\nALTER TABLE \"new_card_enhancements\" RENAME TO \"card_enhancements\";\nCREATE TABLE \"new_cards\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"title\" TEXT NOT NULL,\n    \"description\" TEXT,\n    \"position\" INTEGER NOT NULL,\n    \"column_id\" TEXT NOT NULL,\n    \"board_id\" TEXT,\n    \"ticket_key\" TEXT,\n    \"ticket_type\" TEXT,\n    \"pr_url\" TEXT,\n    \"created_at\" INTEGER NOT NULL DEFAULT 0,\n    \"updated_at\" INTEGER NOT NULL DEFAULT 0,\n    CONSTRAINT \"cards_column_id_fkey\" FOREIGN KEY (\"column_id\") REFERENCES \"columns\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE,\n    CONSTRAINT \"cards_board_id_fkey\" FOREIGN KEY (\"board_id\") REFERENCES \"boards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\nINSERT INTO \"new_cards\" (\"board_id\", \"column_id\", \"created_at\", \"description\", \"id\", \"position\", \"pr_url\", \"ticket_key\", \"ticket_type\", \"title\", \"updated_at\") SELECT \"board_id\", \"column_id\", \"created_at\", \"description\", \"id\", \"position\", \"pr_url\", \"ticket_key\", \"ticket_type\", \"title\", \"updated_at\" FROM \"cards\";\nDROP TABLE \"cards\";\nALTER TABLE \"new_cards\" RENAME TO \"cards\";\nCREATE UNIQUE INDEX \"cards_board_ticket_key_idx\" ON \"cards\"(\"board_id\", \"ticket_key\");\nCREATE TABLE \"new_columns\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"title\" TEXT NOT NULL,\n    \"position\" INTEGER NOT NULL,\n    \"board_id\" TEXT NOT NULL,\n    \"created_at\" INTEGER NOT NULL DEFAULT 0,\n    \"updated_at\" INTEGER NOT NULL DEFAULT 0,\n    CONSTRAINT \"columns_board_id_fkey\" FOREIGN KEY (\"board_id\") REFERENCES \"boards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\nINSERT INTO \"new_columns\" (\"board_id\", \"created_at\", \"id\", \"position\", \"title\", \"updated_at\") SELECT \"board_id\", \"created_at\", \"id\", \"position\", \"title\", \"updated_at\" FROM \"columns\";\nDROP TABLE \"columns\";\nALTER TABLE \"new_columns\" RENAME TO \"columns\";\nCREATE TABLE \"new_conversation_items\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"attempt_id\" TEXT NOT NULL,\n    \"seq\" INTEGER NOT NULL,\n    \"ts\" INTEGER NOT NULL DEFAULT 0,\n    \"item_json\" TEXT NOT NULL,\n    CONSTRAINT \"conversation_items_attempt_id_fkey\" FOREIGN KEY (\"attempt_id\") REFERENCES \"attempts\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\nINSERT INTO \"new_conversation_items\" (\"attempt_id\", \"id\", \"item_json\", \"seq\", \"ts\") SELECT \"attempt_id\", \"id\", \"item_json\", \"seq\", \"ts\" FROM \"conversation_items\";\nDROP TABLE \"conversation_items\";\nALTER TABLE \"new_conversation_items\" RENAME TO \"conversation_items\";\nCREATE TABLE \"new_github_issues\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"board_id\" TEXT NOT NULL,\n    \"card_id\" TEXT NOT NULL,\n    \"owner\" TEXT NOT NULL,\n    \"repo\" TEXT NOT NULL,\n    \"issue_id\" TEXT NOT NULL,\n    \"issue_number\" INTEGER NOT NULL,\n    \"title_snapshot\" TEXT NOT NULL,\n    \"url\" TEXT NOT NULL,\n    \"state\" TEXT NOT NULL,\n    \"created_at\" INTEGER NOT NULL DEFAULT 0,\n    \"updated_at\" INTEGER NOT NULL DEFAULT 0,\n    CONSTRAINT \"github_issues_board_id_fkey\" FOREIGN KEY (\"board_id\") REFERENCES \"boards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE,\n    CONSTRAINT \"github_issues_card_id_fkey\" FOREIGN KEY (\"card_id\") REFERENCES \"cards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\nINSERT INTO \"new_github_issues\" (\"board_id\", \"card_id\", \"created_at\", \"id\", \"issue_id\", \"issue_number\", \"owner\", \"repo\", \"state\", \"title_snapshot\", \"updated_at\", \"url\") SELECT \"board_id\", \"card_id\", \"created_at\", \"id\", \"issue_id\", \"issue_number\", \"owner\", \"repo\", \"state\", \"title_snapshot\", \"updated_at\", \"url\" FROM \"github_issues\";\nDROP TABLE \"github_issues\";\nALTER TABLE \"new_github_issues\" RENAME TO \"github_issues\";\nCREATE TABLE \"new_project_settings\" (\n    \"project_id\" TEXT NOT NULL PRIMARY KEY,\n    \"base_branch\" TEXT NOT NULL DEFAULT 'main',\n    \"preferred_remote\" TEXT,\n    \"setup_script\" TEXT,\n    \"dev_script\" TEXT,\n    \"cleanup_script\" TEXT,\n    \"copy_files\" TEXT,\n    \"default_agent\" TEXT,\n    \"default_profile_id\" TEXT,\n    \"inline_agent\" TEXT,\n    \"inline_profile_id\" TEXT,\n    \"auto_commit_on_finish\" INTEGER NOT NULL DEFAULT 0,\n    \"auto_push_on_autocommit\" INTEGER NOT NULL DEFAULT 0,\n    \"ticket_prefix\" TEXT NOT NULL DEFAULT 'PRJ',\n    \"next_ticket_number\" INTEGER NOT NULL DEFAULT 1,\n    \"github_issue_sync_enabled\" INTEGER NOT NULL DEFAULT 0,\n    \"github_issue_sync_state\" TEXT NOT NULL DEFAULT 'open',\n    \"github_issue_sync_interval_minutes\" INTEGER NOT NULL DEFAULT 15,\n    \"last_github_issue_sync_at\" INTEGER,\n    \"last_github_issue_sync_status\" TEXT NOT NULL DEFAULT 'idle',\n    \"created_at\" INTEGER NOT NULL DEFAULT 0,\n    \"updated_at\" INTEGER NOT NULL DEFAULT 0,\n    CONSTRAINT \"project_settings_project_id_fkey\" FOREIGN KEY (\"project_id\") REFERENCES \"boards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\nINSERT INTO \"new_project_settings\" (\"auto_commit_on_finish\", \"auto_push_on_autocommit\", \"base_branch\", \"cleanup_script\", \"copy_files\", \"created_at\", \"default_agent\", \"default_profile_id\", \"dev_script\", \"github_issue_sync_enabled\", \"github_issue_sync_interval_minutes\", \"github_issue_sync_state\", \"inline_agent\", \"inline_profile_id\", \"last_github_issue_sync_at\", \"last_github_issue_sync_status\", \"next_ticket_number\", \"preferred_remote\", \"project_id\", \"setup_script\", \"ticket_prefix\", \"updated_at\") SELECT \"auto_commit_on_finish\", \"auto_push_on_autocommit\", \"base_branch\", \"cleanup_script\", \"copy_files\", \"created_at\", \"default_agent\", \"default_profile_id\", \"dev_script\", \"github_issue_sync_enabled\", \"github_issue_sync_interval_minutes\", \"github_issue_sync_state\", \"inline_agent\", \"inline_profile_id\", \"last_github_issue_sync_at\", \"last_github_issue_sync_status\", \"next_ticket_number\", \"preferred_remote\", \"project_id\", \"setup_script\", \"ticket_prefix\", \"updated_at\" FROM \"project_settings\";\nDROP TABLE \"project_settings\";\nALTER TABLE \"new_project_settings\" RENAME TO \"project_settings\";\nPRAGMA foreign_keys=ON;\nPRAGMA defer_foreign_keys=OFF;\n" },
  { id: "20251203152459_fix_timestamp_defaults", name: "20251203152459_fix_timestamp_defaults", checksum: "697be977cf1190afe58c584946beb8ebe73b48f8abd682d71908a2531b756718", sql: "-- RedefineTables\nPRAGMA defer_foreign_keys=ON;\nPRAGMA foreign_keys=OFF;\nCREATE TABLE \"new_agent_profiles\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"project_id\" TEXT NOT NULL,\n    \"agent\" TEXT NOT NULL,\n    \"name\" TEXT NOT NULL,\n    \"config_json\" TEXT NOT NULL,\n    \"created_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"updated_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    CONSTRAINT \"agent_profiles_project_id_fkey\" FOREIGN KEY (\"project_id\") REFERENCES \"boards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\nINSERT INTO \"new_agent_profiles\" (\"agent\", \"config_json\", \"created_at\", \"id\", \"name\", \"project_id\", \"updated_at\") SELECT \"agent\", \"config_json\", \"created_at\", \"id\", \"name\", \"project_id\", \"updated_at\" FROM \"agent_profiles\";\nDROP TABLE \"agent_profiles\";\nALTER TABLE \"new_agent_profiles\" RENAME TO \"agent_profiles\";\nCREATE TABLE \"new_agent_profiles_global\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"agent\" TEXT NOT NULL,\n    \"name\" TEXT NOT NULL,\n    \"config_json\" TEXT NOT NULL,\n    \"created_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"updated_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP\n);\nINSERT INTO \"new_agent_profiles_global\" (\"agent\", \"config_json\", \"created_at\", \"id\", \"name\", \"updated_at\") SELECT \"agent\", \"config_json\", \"created_at\", \"id\", \"name\", \"updated_at\" FROM \"agent_profiles_global\";\nDROP TABLE \"agent_profiles_global\";\nALTER TABLE \"new_agent_profiles_global\" RENAME TO \"agent_profiles_global\";\nCREATE TABLE \"new_app_settings\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY DEFAULT 'singleton',\n    \"theme\" TEXT NOT NULL DEFAULT 'system',\n    \"language\" TEXT NOT NULL DEFAULT 'browser',\n    \"telemetry_enabled\" INTEGER NOT NULL DEFAULT 0,\n    \"notif_toast_sounds\" INTEGER NOT NULL DEFAULT 0,\n    \"notif_desktop\" INTEGER NOT NULL DEFAULT 0,\n    \"auto_start_agent_on_in_progress\" INTEGER NOT NULL DEFAULT 0,\n    \"editor_type\" TEXT NOT NULL DEFAULT 'VS_CODE',\n    \"editor_command\" TEXT,\n    \"git_user_name\" TEXT,\n    \"git_user_email\" TEXT,\n    \"branch_template\" TEXT NOT NULL DEFAULT '{prefix}/{ticketKey}-{slug}',\n    \"gh_pr_title_template\" TEXT,\n    \"gh_pr_body_template\" TEXT,\n    \"gh_autolink_tickets\" INTEGER NOT NULL DEFAULT 1,\n    \"created_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"updated_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP\n);\nINSERT INTO \"new_app_settings\" (\"auto_start_agent_on_in_progress\", \"branch_template\", \"created_at\", \"editor_command\", \"editor_type\", \"gh_autolink_tickets\", \"gh_pr_body_template\", \"gh_pr_title_template\", \"git_user_email\", \"git_user_name\", \"id\", \"language\", \"notif_desktop\", \"notif_toast_sounds\", \"telemetry_enabled\", \"theme\", \"updated_at\") SELECT \"auto_start_agent_on_in_progress\", \"branch_template\", \"created_at\", \"editor_command\", \"editor_type\", \"gh_autolink_tickets\", \"gh_pr_body_template\", \"gh_pr_title_template\", \"git_user_email\", \"git_user_name\", \"id\", \"language\", \"notif_desktop\", \"notif_toast_sounds\", \"telemetry_enabled\", \"theme\", \"updated_at\" FROM \"app_settings\";\nDROP TABLE \"app_settings\";\nALTER TABLE \"new_app_settings\" RENAME TO \"app_settings\";\nCREATE TABLE \"new_attempt_logs\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"attempt_id\" TEXT NOT NULL,\n    \"ts\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"level\" TEXT NOT NULL,\n    \"message\" TEXT NOT NULL,\n    CONSTRAINT \"attempt_logs_attempt_id_fkey\" FOREIGN KEY (\"attempt_id\") REFERENCES \"attempts\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\nINSERT INTO \"new_attempt_logs\" (\"attempt_id\", \"id\", \"level\", \"message\", \"ts\") SELECT \"attempt_id\", \"id\", \"level\", \"message\", \"ts\" FROM \"attempt_logs\";\nDROP TABLE \"attempt_logs\";\nALTER TABLE \"new_attempt_logs\" RENAME TO \"attempt_logs\";\nCREATE TABLE \"new_attempt_todos\" (\n    \"attempt_id\" TEXT NOT NULL PRIMARY KEY,\n    \"todos_json\" TEXT NOT NULL,\n    \"updated_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    CONSTRAINT \"attempt_todos_attempt_id_fkey\" FOREIGN KEY (\"attempt_id\") REFERENCES \"attempts\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\nINSERT INTO \"new_attempt_todos\" (\"attempt_id\", \"todos_json\", \"updated_at\") SELECT \"attempt_id\", \"todos_json\", \"updated_at\" FROM \"attempt_todos\";\nDROP TABLE \"attempt_todos\";\nALTER TABLE \"new_attempt_todos\" RENAME TO \"attempt_todos\";\nCREATE TABLE \"new_attempts\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"board_id\" TEXT NOT NULL,\n    \"card_id\" TEXT NOT NULL,\n    \"agent\" TEXT NOT NULL,\n    \"status\" TEXT NOT NULL,\n    \"base_branch\" TEXT NOT NULL,\n    \"branch_name\" TEXT NOT NULL,\n    \"worktree_path\" TEXT,\n    \"session_id\" TEXT,\n    \"created_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"updated_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"started_at\" INTEGER,\n    \"ended_at\" INTEGER,\n    CONSTRAINT \"attempts_board_id_fkey\" FOREIGN KEY (\"board_id\") REFERENCES \"boards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE,\n    CONSTRAINT \"attempts_card_id_fkey\" FOREIGN KEY (\"card_id\") REFERENCES \"cards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\nINSERT INTO \"new_attempts\" (\"agent\", \"base_branch\", \"board_id\", \"branch_name\", \"card_id\", \"created_at\", \"ended_at\", \"id\", \"session_id\", \"started_at\", \"status\", \"updated_at\", \"worktree_path\") SELECT \"agent\", \"base_branch\", \"board_id\", \"branch_name\", \"card_id\", \"created_at\", \"ended_at\", \"id\", \"session_id\", \"started_at\", \"status\", \"updated_at\", \"worktree_path\" FROM \"attempts\";\nDROP TABLE \"attempts\";\nALTER TABLE \"new_attempts\" RENAME TO \"attempts\";\nCREATE TABLE \"new_boards\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"name\" TEXT NOT NULL,\n    \"repository_path\" TEXT NOT NULL,\n    \"repository_url\" TEXT,\n    \"repository_slug\" TEXT,\n    \"created_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"updated_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP\n);\nINSERT INTO \"new_boards\" (\"created_at\", \"id\", \"name\", \"repository_path\", \"repository_slug\", \"repository_url\", \"updated_at\") SELECT \"created_at\", \"id\", \"name\", \"repository_path\", \"repository_slug\", \"repository_url\", \"updated_at\" FROM \"boards\";\nDROP TABLE \"boards\";\nALTER TABLE \"new_boards\" RENAME TO \"boards\";\nCREATE TABLE \"new_card_dependencies\" (\n    \"card_id\" TEXT NOT NULL,\n    \"depends_on_card_id\" TEXT NOT NULL,\n    \"created_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\n    PRIMARY KEY (\"card_id\", \"depends_on_card_id\"),\n    CONSTRAINT \"card_dependencies_card_id_fkey\" FOREIGN KEY (\"card_id\") REFERENCES \"cards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE,\n    CONSTRAINT \"card_dependencies_depends_on_card_id_fkey\" FOREIGN KEY (\"depends_on_card_id\") REFERENCES \"cards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\nINSERT INTO \"new_card_dependencies\" (\"card_id\", \"created_at\", \"depends_on_card_id\") SELECT \"card_id\", \"created_at\", \"depends_on_card_id\" FROM \"card_dependencies\";\nDROP TABLE \"card_dependencies\";\nALTER TABLE \"new_card_dependencies\" RENAME TO \"card_dependencies\";\nCREATE UNIQUE INDEX \"card_deps_unique\" ON \"card_dependencies\"(\"card_id\", \"depends_on_card_id\");\nCREATE TABLE \"new_card_enhancements\" (\n    \"card_id\" TEXT NOT NULL PRIMARY KEY,\n    \"status\" TEXT NOT NULL,\n    \"suggestion_title\" TEXT,\n    \"suggestion_description\" TEXT,\n    \"updated_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    CONSTRAINT \"card_enhancements_card_id_fkey\" FOREIGN KEY (\"card_id\") REFERENCES \"cards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\nINSERT INTO \"new_card_enhancements\" (\"card_id\", \"status\", \"suggestion_description\", \"suggestion_title\", \"updated_at\") SELECT \"card_id\", \"status\", \"suggestion_description\", \"suggestion_title\", \"updated_at\" FROM \"card_enhancements\";\nDROP TABLE \"card_enhancements\";\nALTER TABLE \"new_card_enhancements\" RENAME TO \"card_enhancements\";\nCREATE TABLE \"new_cards\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"title\" TEXT NOT NULL,\n    \"description\" TEXT,\n    \"position\" INTEGER NOT NULL,\n    \"column_id\" TEXT NOT NULL,\n    \"board_id\" TEXT,\n    \"ticket_key\" TEXT,\n    \"ticket_type\" TEXT,\n    \"pr_url\" TEXT,\n    \"created_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"updated_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    CONSTRAINT \"cards_column_id_fkey\" FOREIGN KEY (\"column_id\") REFERENCES \"columns\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE,\n    CONSTRAINT \"cards_board_id_fkey\" FOREIGN KEY (\"board_id\") REFERENCES \"boards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\nINSERT INTO \"new_cards\" (\"board_id\", \"column_id\", \"created_at\", \"description\", \"id\", \"position\", \"pr_url\", \"ticket_key\", \"ticket_type\", \"title\", \"updated_at\") SELECT \"board_id\", \"column_id\", \"created_at\", \"description\", \"id\", \"position\", \"pr_url\", \"ticket_key\", \"ticket_type\", \"title\", \"updated_at\" FROM \"cards\";\nDROP TABLE \"cards\";\nALTER TABLE \"new_cards\" RENAME TO \"cards\";\nCREATE UNIQUE INDEX \"cards_board_ticket_key_idx\" ON \"cards\"(\"board_id\", \"ticket_key\");\nCREATE TABLE \"new_columns\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"title\" TEXT NOT NULL,\n    \"position\" INTEGER NOT NULL,\n    \"board_id\" TEXT NOT NULL,\n    \"created_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"updated_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    CONSTRAINT \"columns_board_id_fkey\" FOREIGN KEY (\"board_id\") REFERENCES \"boards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\nINSERT INTO \"new_columns\" (\"board_id\", \"created_at\", \"id\", \"position\", \"title\", \"updated_at\") SELECT \"board_id\", \"created_at\", \"id\", \"position\", \"title\", \"updated_at\" FROM \"columns\";\nDROP TABLE \"columns\";\nALTER TABLE \"new_columns\" RENAME TO \"columns\";\nCREATE TABLE \"new_conversation_items\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"attempt_id\" TEXT NOT NULL,\n    \"seq\" INTEGER NOT NULL,\n    \"ts\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"item_json\" TEXT NOT NULL,\n    CONSTRAINT \"conversation_items_attempt_id_fkey\" FOREIGN KEY (\"attempt_id\") REFERENCES \"attempts\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\nINSERT INTO \"new_conversation_items\" (\"attempt_id\", \"id\", \"item_json\", \"seq\", \"ts\") SELECT \"attempt_id\", \"id\", \"item_json\", \"seq\", \"ts\" FROM \"conversation_items\";\nDROP TABLE \"conversation_items\";\nALTER TABLE \"new_conversation_items\" RENAME TO \"conversation_items\";\nCREATE TABLE \"new_github_app_configs\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY DEFAULT 'singleton',\n    \"client_id\" TEXT NOT NULL,\n    \"client_secret\" TEXT,\n    \"created_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"updated_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP\n);\nINSERT INTO \"new_github_app_configs\" (\"client_id\", \"client_secret\", \"created_at\", \"id\", \"updated_at\") SELECT \"client_id\", \"client_secret\", \"created_at\", \"id\", \"updated_at\" FROM \"github_app_configs\";\nDROP TABLE \"github_app_configs\";\nALTER TABLE \"new_github_app_configs\" RENAME TO \"github_app_configs\";\nCREATE TABLE \"new_github_connections\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"username\" TEXT,\n    \"primary_email\" TEXT,\n    \"access_token\" TEXT,\n    \"token_type\" TEXT,\n    \"scope\" TEXT,\n    \"created_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"updated_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP\n);\nINSERT INTO \"new_github_connections\" (\"access_token\", \"created_at\", \"id\", \"primary_email\", \"scope\", \"token_type\", \"updated_at\", \"username\") SELECT \"access_token\", \"created_at\", \"id\", \"primary_email\", \"scope\", \"token_type\", \"updated_at\", \"username\" FROM \"github_connections\";\nDROP TABLE \"github_connections\";\nALTER TABLE \"new_github_connections\" RENAME TO \"github_connections\";\nCREATE TABLE \"new_github_issues\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY,\n    \"board_id\" TEXT NOT NULL,\n    \"card_id\" TEXT NOT NULL,\n    \"owner\" TEXT NOT NULL,\n    \"repo\" TEXT NOT NULL,\n    \"issue_id\" TEXT NOT NULL,\n    \"issue_number\" INTEGER NOT NULL,\n    \"title_snapshot\" TEXT NOT NULL,\n    \"url\" TEXT NOT NULL,\n    \"state\" TEXT NOT NULL,\n    \"created_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"updated_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    CONSTRAINT \"github_issues_board_id_fkey\" FOREIGN KEY (\"board_id\") REFERENCES \"boards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE,\n    CONSTRAINT \"github_issues_card_id_fkey\" FOREIGN KEY (\"card_id\") REFERENCES \"cards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\nINSERT INTO \"new_github_issues\" (\"board_id\", \"card_id\", \"created_at\", \"id\", \"issue_id\", \"issue_number\", \"owner\", \"repo\", \"state\", \"title_snapshot\", \"updated_at\", \"url\") SELECT \"board_id\", \"card_id\", \"created_at\", \"id\", \"issue_id\", \"issue_number\", \"owner\", \"repo\", \"state\", \"title_snapshot\", \"updated_at\", \"url\" FROM \"github_issues\";\nDROP TABLE \"github_issues\";\nALTER TABLE \"new_github_issues\" RENAME TO \"github_issues\";\nCREATE TABLE \"new_onboarding_state\" (\n    \"id\" TEXT NOT NULL PRIMARY KEY DEFAULT 'singleton',\n    \"status\" TEXT NOT NULL DEFAULT 'pending',\n    \"last_step\" TEXT,\n    \"completed_at\" INTEGER,\n    \"created_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"updated_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP\n);\nINSERT INTO \"new_onboarding_state\" (\"completed_at\", \"created_at\", \"id\", \"last_step\", \"status\", \"updated_at\") SELECT \"completed_at\", \"created_at\", \"id\", \"last_step\", \"status\", \"updated_at\" FROM \"onboarding_state\";\nDROP TABLE \"onboarding_state\";\nALTER TABLE \"new_onboarding_state\" RENAME TO \"onboarding_state\";\nCREATE TABLE \"new_project_settings\" (\n    \"project_id\" TEXT NOT NULL PRIMARY KEY,\n    \"base_branch\" TEXT NOT NULL DEFAULT 'main',\n    \"preferred_remote\" TEXT,\n    \"setup_script\" TEXT,\n    \"dev_script\" TEXT,\n    \"cleanup_script\" TEXT,\n    \"copy_files\" TEXT,\n    \"default_agent\" TEXT,\n    \"default_profile_id\" TEXT,\n    \"inline_agent\" TEXT,\n    \"inline_profile_id\" TEXT,\n    \"auto_commit_on_finish\" INTEGER NOT NULL DEFAULT 0,\n    \"auto_push_on_autocommit\" INTEGER NOT NULL DEFAULT 0,\n    \"ticket_prefix\" TEXT NOT NULL DEFAULT 'PRJ',\n    \"next_ticket_number\" INTEGER NOT NULL DEFAULT 1,\n    \"github_issue_sync_enabled\" INTEGER NOT NULL DEFAULT 0,\n    \"github_issue_sync_state\" TEXT NOT NULL DEFAULT 'open',\n    \"github_issue_sync_interval_minutes\" INTEGER NOT NULL DEFAULT 15,\n    \"last_github_issue_sync_at\" INTEGER,\n    \"last_github_issue_sync_status\" TEXT NOT NULL DEFAULT 'idle',\n    \"created_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"updated_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    CONSTRAINT \"project_settings_project_id_fkey\" FOREIGN KEY (\"project_id\") REFERENCES \"boards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\nINSERT INTO \"new_project_settings\" (\"auto_commit_on_finish\", \"auto_push_on_autocommit\", \"base_branch\", \"cleanup_script\", \"copy_files\", \"created_at\", \"default_agent\", \"default_profile_id\", \"dev_script\", \"github_issue_sync_enabled\", \"github_issue_sync_interval_minutes\", \"github_issue_sync_state\", \"inline_agent\", \"inline_profile_id\", \"last_github_issue_sync_at\", \"last_github_issue_sync_status\", \"next_ticket_number\", \"preferred_remote\", \"project_id\", \"setup_script\", \"ticket_prefix\", \"updated_at\") SELECT \"auto_commit_on_finish\", \"auto_push_on_autocommit\", \"base_branch\", \"cleanup_script\", \"copy_files\", \"created_at\", \"default_agent\", \"default_profile_id\", \"dev_script\", \"github_issue_sync_enabled\", \"github_issue_sync_interval_minutes\", \"github_issue_sync_state\", \"inline_agent\", \"inline_profile_id\", \"last_github_issue_sync_at\", \"last_github_issue_sync_status\", \"next_ticket_number\", \"preferred_remote\", \"project_id\", \"setup_script\", \"ticket_prefix\", \"updated_at\" FROM \"project_settings\";\nDROP TABLE \"project_settings\";\nALTER TABLE \"new_project_settings\" RENAME TO \"project_settings\";\nPRAGMA foreign_keys=ON;\nPRAGMA defer_foreign_keys=OFF;\n" },
  { id: "20251203160000_inline_agent_profiles", name: "20251203160000_inline_agent_profiles", checksum: "f0aa96e6b2347b07d17e085b28c5723f341cee0259b0679104163fc91487ee95", sql: "PRAGMA foreign_keys=OFF;\nPRAGMA defer_foreign_keys=ON;\n\nCREATE TABLE \"new_project_settings\" (\n    \"project_id\" TEXT NOT NULL PRIMARY KEY,\n    \"base_branch\" TEXT NOT NULL DEFAULT 'main',\n    \"preferred_remote\" TEXT,\n    \"setup_script\" TEXT,\n    \"dev_script\" TEXT,\n    \"cleanup_script\" TEXT,\n    \"copy_files\" TEXT,\n    \"default_agent\" TEXT,\n    \"default_profile_id\" TEXT,\n    \"inline_agent\" TEXT,\n    \"inline_profile_id\" TEXT,\n    \"inline_agent_profile_mapping_json\" TEXT,\n    \"auto_commit_on_finish\" INTEGER NOT NULL DEFAULT 0,\n    \"auto_push_on_autocommit\" INTEGER NOT NULL DEFAULT 0,\n    \"ticket_prefix\" TEXT NOT NULL DEFAULT 'PRJ',\n    \"next_ticket_number\" INTEGER NOT NULL DEFAULT 1,\n    \"github_issue_sync_enabled\" INTEGER NOT NULL DEFAULT 0,\n    \"github_issue_sync_state\" TEXT NOT NULL DEFAULT 'open',\n    \"github_issue_sync_interval_minutes\" INTEGER NOT NULL DEFAULT 15,\n    \"last_github_issue_sync_at\" INTEGER,\n    \"last_github_issue_sync_status\" TEXT NOT NULL DEFAULT 'idle',\n    \"created_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"updated_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    CONSTRAINT \"project_settings_project_id_fkey\" FOREIGN KEY (\"project_id\") REFERENCES \"boards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\n\nINSERT INTO \"new_project_settings\" (\n    \"project_id\",\n    \"base_branch\",\n    \"preferred_remote\",\n    \"setup_script\",\n    \"dev_script\",\n    \"cleanup_script\",\n    \"copy_files\",\n    \"default_agent\",\n    \"default_profile_id\",\n    \"inline_agent\",\n    \"inline_profile_id\",\n    \"inline_agent_profile_mapping_json\",\n    \"auto_commit_on_finish\",\n    \"auto_push_on_autocommit\",\n    \"ticket_prefix\",\n    \"next_ticket_number\",\n    \"github_issue_sync_enabled\",\n    \"github_issue_sync_state\",\n    \"github_issue_sync_interval_minutes\",\n    \"last_github_issue_sync_at\",\n    \"last_github_issue_sync_status\",\n    \"created_at\",\n    \"updated_at\"\n)\nSELECT\n    \"project_id\",\n    \"base_branch\",\n    \"preferred_remote\",\n    \"setup_script\",\n    \"dev_script\",\n    \"cleanup_script\",\n    \"copy_files\",\n    \"default_agent\",\n    \"default_profile_id\",\n    \"inline_agent\",\n    \"inline_profile_id\",\n    NULL AS \"inline_agent_profile_mapping_json\",\n    \"auto_commit_on_finish\",\n    \"auto_push_on_autocommit\",\n    \"ticket_prefix\",\n    \"next_ticket_number\",\n    \"github_issue_sync_enabled\",\n    \"github_issue_sync_state\",\n    \"github_issue_sync_interval_minutes\",\n    \"last_github_issue_sync_at\",\n    \"last_github_issue_sync_status\",\n    \"created_at\",\n    \"updated_at\"\nFROM \"project_settings\";\n\nDROP TABLE \"project_settings\";\nALTER TABLE \"new_project_settings\" RENAME TO \"project_settings\";\n\nPRAGMA foreign_keys=ON;\nPRAGMA defer_foreign_keys=OFF;\n\n" },
  { id: "20251212120000_allow_scripts_to_fail", name: "20251212120000_allow_scripts_to_fail", checksum: "79389587bc6e3e05712e9d6695bcf830be28d42e8685ec828ce572c365c345a7", sql: "PRAGMA foreign_keys=OFF;\nPRAGMA defer_foreign_keys=ON;\n\nCREATE TABLE \"new_project_settings\" (\n    \"project_id\" TEXT NOT NULL PRIMARY KEY,\n    \"base_branch\" TEXT NOT NULL DEFAULT 'main',\n    \"preferred_remote\" TEXT,\n    \"setup_script\" TEXT,\n    \"dev_script\" TEXT,\n    \"cleanup_script\" TEXT,\n    \"copy_files\" TEXT,\n    \"allow_scripts_to_fail\" INTEGER NOT NULL DEFAULT 0,\n    \"allow_copy_files_to_fail\" INTEGER NOT NULL DEFAULT 0,\n    \"allow_setup_script_to_fail\" INTEGER NOT NULL DEFAULT 0,\n    \"allow_dev_script_to_fail\" INTEGER NOT NULL DEFAULT 0,\n    \"allow_cleanup_script_to_fail\" INTEGER NOT NULL DEFAULT 0,\n    \"default_agent\" TEXT,\n    \"default_profile_id\" TEXT,\n    \"inline_agent\" TEXT,\n    \"inline_profile_id\" TEXT,\n    \"inline_agent_profile_mapping_json\" TEXT,\n    \"auto_commit_on_finish\" INTEGER NOT NULL DEFAULT 0,\n    \"auto_push_on_autocommit\" INTEGER NOT NULL DEFAULT 0,\n    \"ticket_prefix\" TEXT NOT NULL DEFAULT 'PRJ',\n    \"next_ticket_number\" INTEGER NOT NULL DEFAULT 1,\n    \"github_issue_sync_enabled\" INTEGER NOT NULL DEFAULT 0,\n    \"github_issue_sync_state\" TEXT NOT NULL DEFAULT 'open',\n    \"github_issue_sync_interval_minutes\" INTEGER NOT NULL DEFAULT 15,\n    \"last_github_issue_sync_at\" INTEGER,\n    \"last_github_issue_sync_status\" TEXT NOT NULL DEFAULT 'idle',\n    \"created_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"updated_at\" INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    CONSTRAINT \"project_settings_project_id_fkey\" FOREIGN KEY (\"project_id\") REFERENCES \"boards\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n);\n\nINSERT INTO \"new_project_settings\" (\n    \"project_id\",\n    \"base_branch\",\n    \"preferred_remote\",\n    \"setup_script\",\n    \"dev_script\",\n    \"cleanup_script\",\n    \"copy_files\",\n    \"allow_scripts_to_fail\",\n    \"allow_copy_files_to_fail\",\n    \"allow_setup_script_to_fail\",\n    \"allow_dev_script_to_fail\",\n    \"allow_cleanup_script_to_fail\",\n    \"default_agent\",\n    \"default_profile_id\",\n    \"inline_agent\",\n    \"inline_profile_id\",\n    \"inline_agent_profile_mapping_json\",\n    \"auto_commit_on_finish\",\n    \"auto_push_on_autocommit\",\n    \"ticket_prefix\",\n    \"next_ticket_number\",\n    \"github_issue_sync_enabled\",\n    \"github_issue_sync_state\",\n    \"github_issue_sync_interval_minutes\",\n    \"last_github_issue_sync_at\",\n    \"last_github_issue_sync_status\",\n    \"created_at\",\n    \"updated_at\"\n)\nSELECT\n    \"project_id\",\n    \"base_branch\",\n    \"preferred_remote\",\n    \"setup_script\",\n    \"dev_script\",\n    \"cleanup_script\",\n    \"copy_files\",\n    0 AS \"allow_scripts_to_fail\",\n    0 AS \"allow_copy_files_to_fail\",\n    0 AS \"allow_setup_script_to_fail\",\n    0 AS \"allow_dev_script_to_fail\",\n    0 AS \"allow_cleanup_script_to_fail\",\n    \"default_agent\",\n    \"default_profile_id\",\n    \"inline_agent\",\n    \"inline_profile_id\",\n    \"inline_agent_profile_mapping_json\",\n    \"auto_commit_on_finish\",\n    \"auto_push_on_autocommit\",\n    \"ticket_prefix\",\n    \"next_ticket_number\",\n    \"github_issue_sync_enabled\",\n    \"github_issue_sync_state\",\n    \"github_issue_sync_interval_minutes\",\n    \"last_github_issue_sync_at\",\n    \"last_github_issue_sync_status\",\n    \"created_at\",\n    \"updated_at\"\nFROM \"project_settings\";\n\nDROP TABLE \"project_settings\";\nALTER TABLE \"new_project_settings\" RENAME TO \"project_settings\";\n\nPRAGMA foreign_keys=ON;\nPRAGMA defer_foreign_keys=OFF;\n\n" },
  { id: "20251212130000_github_issue_export", name: "20251212130000_github_issue_export", checksum: "80eae0ab7f7b85e0d66d44223232962ce92c4b2058d2939c1acff2ca01ba605e", sql: "PRAGMA foreign_keys=OFF;\nPRAGMA defer_foreign_keys=ON;\n\nALTER TABLE \"project_settings\" ADD COLUMN \"github_issue_auto_create_enabled\" INTEGER NOT NULL DEFAULT 0;\n\nALTER TABLE \"github_issues\" ADD COLUMN \"direction\" TEXT NOT NULL DEFAULT 'imported';\nUPDATE \"github_issues\" SET \"direction\" = 'imported' WHERE \"direction\" IS NULL;\n\nPRAGMA foreign_keys=ON;\nPRAGMA defer_foreign_keys=OFF;\n\n" },
  { id: "20251212140000_auto_close_ticket_on_pr_merge", name: "20251212140000_auto_close_ticket_on_pr_merge", checksum: "60ceec84c6577f9fbd3c680d5756a4d2f3160629ff593e6eeb5067605ae90f80", sql: "-- Add project setting to auto-close tickets on PR merge\nALTER TABLE project_settings\n    ADD COLUMN auto_close_ticket_on_pr_merge INTEGER NOT NULL DEFAULT 0;\n\n-- Add per-card opt-out flag (default false)\nALTER TABLE cards\n    ADD COLUMN disable_auto_close_on_pr_merge INTEGER NOT NULL DEFAULT 0;\n" },
  { id: "20251212141000_pr_auto_close_metadata", name: "20251212141000_pr_auto_close_metadata", checksum: "5cfc1b4ac59c6931e7a63062b0fe50f132e6657866c959d3ee153fc1882ce136", sql: "-- Add PR auto-close scheduler metadata\nALTER TABLE project_settings\n    ADD COLUMN last_github_pr_auto_close_at INTEGER;\n\nALTER TABLE project_settings\n    ADD COLUMN last_github_pr_auto_close_status TEXT NOT NULL DEFAULT 'idle';\n" },
  { id: "20251212153000_add_is_enhanced_to_cards", name: "20251212153000_add_is_enhanced_to_cards", checksum: "48cd599550a47e0aff2edd39a119e42d01c4a59e4c1198d56d9a6a94c8e6a9ea", sql: "ALTER TABLE cards ADD COLUMN is_enhanced integer NOT NULL DEFAULT 0;\n\n" },
  { id: "20251226150000_add_opencode_port", name: "20251226150000_add_opencode_port", checksum: "c099dd1e968904ef02da798f2735694a0376c23124a5a8a5599ae77b9ef7b6ad", sql: "ALTER TABLE app_settings ADD COLUMN opencode_port INTEGER NOT NULL DEFAULT 4097;\n" },
  { id: "20251231100000_card_images", name: "20251231100000_card_images", checksum: "84a29ac01bf1ce4f0297f3bb855952247106c80e959c779a4d883fdd030ff774", sql: "CREATE TABLE card_images (\n    card_id TEXT PRIMARY KEY REFERENCES cards(id) ON DELETE CASCADE,\n    images_json TEXT NOT NULL,\n    created_at INTEGER NOT NULL DEFAULT CURRENT_TIMESTAMP\n);\n" },
];
